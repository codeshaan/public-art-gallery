[{"F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\index.js":"1","F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\reportWebVitals.js":"2","F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\App.js":"3","F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\firebase\\config.js":"4","F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\components\\Nav.js":"5","F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\components\\UploadModal.js":"6","F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\components\\ProgressBar.js":"7"},{"size":516,"mtime":1608622718286,"results":"8","hashOfConfig":"9"},{"size":362,"mtime":499162500000,"results":"10","hashOfConfig":"9"},{"size":127,"mtime":1608648950703,"results":"11","hashOfConfig":"9"},{"size":615,"mtime":1608612466577,"results":"12","hashOfConfig":"9"},{"size":719,"mtime":1608648960590,"results":"13","hashOfConfig":"9"},{"size":4035,"mtime":1608648934440,"results":"14","hashOfConfig":"9"},{"size":401,"mtime":1608648220476,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"9xudxn",{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"18"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\index.js",[],["32","33"],"F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\reportWebVitals.js",[],"F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\App.js",[],"F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\firebase\\config.js",[],"F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\components\\Nav.js",[],"F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\components\\UploadModal.js",["34","35"],"import { useEffect, useState } from \"react\";\r\nimport ProgressBar from \"./ProgressBar\";\r\nimport { storage, db } from \"../firebase/config\";\r\nimport firebase from \"firebase\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst UploadModal = ({ setUploadModal }) => {\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [progress, setProgress] = useState(null);\r\n  const [successMsg, setSuccessMsg] = useState(null);\r\n\r\n  const allowedTypes = [\"image/png\", \"image/jpeg\"];\r\n\r\n  useEffect(() => {\r\n    // To attach an event listener to window to close modal when clicked outside the modal content or pressed ESC key\r\n\r\n    // When clicked outside the modal, close the modal\r\n    const closeModalWhenClickedOutside = (e) => {\r\n      if (e.target.classList.contains(\"modal-backdrop\")) {\r\n        setUploadModal(false);\r\n      }\r\n    };\r\n\r\n    // Close modal if escape key is pressed\r\n    const closeModalIfEscPressed = (e) => {\r\n      if (e.keyCode == 27) {\r\n        setUploadModal(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"click\", closeModalWhenClickedOutside);\r\n    window.addEventListener(\"keydown\", closeModalIfEscPressed);\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      window.removeEventListener(\"click\", closeModalWhenClickedOutside);\r\n      window.removeEventListener(\"keydown\", closeModalIfEscPressed);\r\n    };\r\n  }, []);\r\n\r\n  // File handler => Checks if the image is of PNG / JPEG\r\n  const fileHandler = (e) => {\r\n    const file = e.target.files[0];\r\n\r\n    if (!allowedTypes.includes(file.type)) {\r\n      setError(\"Please select the image type as PNG or JPEG\");\r\n      setFile(null);\r\n    } else {\r\n      setError(\"\");\r\n      setFile(file);\r\n    }\r\n  };\r\n\r\n  const uploadFile = () => {\r\n    // Create a storage ref\r\n    const storageRef = storage.ref(file.name);\r\n\r\n    // File uploadation\r\n    storageRef.put(file).then(\r\n      (snapshot) => {\r\n        let percent = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        setProgress(percent);\r\n      },\r\n      (err) => {\r\n        if (err) setError(err);\r\n      },\r\n      async () => {\r\n        const URL = await storageRef.getDownloadURL();\r\n\r\n        // Set the success message\r\n        setSuccessMsg(\"Your file has been uploaded successfully\");\r\n\r\n        // Save the uploaded file data in the Firestore Database\r\n        db.collection(\"images\").add({\r\n          url: URL,\r\n          createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"modal-backdrop\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n    >\r\n      <motion.div\r\n        className=\"modal-content\"\r\n        initial={{ scale: 0 }}\r\n        animate={{ scale: 1 }}\r\n        exit={{ scale: 0 }}\r\n        transition={{ duration: 0.3 }}\r\n      >\r\n        <header>\r\n          <h1>Upload a Picture</h1>\r\n        </header>\r\n        <div className=\"file-selector\">\r\n          {error && <div className=\"file-error\">{error}</div>}\r\n          {successMsg && <div className=\"file-success\">{successMsg}</div>}\r\n\r\n          <label>\r\n            <input type=\"file\" onChange={fileHandler} />\r\n            <div className=\"file-placeholder\">\r\n              {file ? (\r\n                <h1>{file.name}</h1>\r\n              ) : (\r\n                <h1>\r\n                  <i className=\"fa fa-upload\" aria-hidden=\"true\"></i> Select A\r\n                  file\r\n                </h1>\r\n              )}\r\n            </div>\r\n          </label>\r\n        </div>\r\n        {progress && <ProgressBar progress={progress} />}\r\n        <div className=\"actions\">\r\n          <button className=\"danger-btn\" onClick={() => setUploadModal(false)}>\r\n            Cancel\r\n          </button>\r\n          <button className=\"primary-btn\" onClick={uploadFile}>\r\n            <i className=\"fa fa-upload\" aria-hidden=\"true\"></i> Upload\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default UploadModal;\r\n","F:\\projects\\firebase-public-art-gallery\\public-art-gallery\\src\\components\\ProgressBar.js",[],{"ruleId":"36","replacedBy":"37"},{"ruleId":"38","replacedBy":"39"},{"ruleId":"40","severity":1,"message":"41","line":27,"column":21,"nodeType":"42","messageId":"43","endLine":27,"endColumn":23},{"ruleId":"44","severity":1,"message":"45","line":40,"column":6,"nodeType":"46","endLine":40,"endColumn":8,"suggestions":"47"},"no-native-reassign",["48"],"no-negated-in-lhs",["49"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'setUploadModal'. Either include it or remove the dependency array. If 'setUploadModal' changes too often, find the parent component that defines it and wrap that definition in useCallback.","ArrayExpression",["50"],"no-global-assign","no-unsafe-negation",{"desc":"51","fix":"52"},"Update the dependencies array to be: [setUploadModal]",{"range":"53","text":"54"},[1383,1385],"[setUploadModal]"]